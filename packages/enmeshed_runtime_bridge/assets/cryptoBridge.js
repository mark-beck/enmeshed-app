"use strict";(()=>{var A=Object.defineProperty;var i=(a,e)=>A(a,"name",{value:e,configurable:!0});var P=class P extends Error{constructor(e){super(e)}};i(P,"TsDartBridgeError");var g=P;function l(a){let e=atob(a),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}i(l,"base64toUint8Array");async function y(a){let e=a;a.constructor!=Uint8Array&&(e=new Uint8Array(a));let t=await new Promise(r=>{let n=new FileReader;n.onload=()=>r(n.result),n.readAsDataURL(new Blob([e.buffer]))});return t.slice(t.indexOf(",")+1)}i(y,"bufferToBase64");var s="handleCryptoEvent";async function o(a,e){let t=await window.flutter_inappwebview.callHandler(a,JSON.stringify(e)),r=JSON.parse(t);if(r.status=="ok")return r.data;throw new g(r.message)}i(o,"callHandler");async function b(a,e){let r=await o(s,{object_type:"bare",method:"create_provider",args:[a,e]}),n=h();return n._id=r,n}i(b,"createProvider");async function v(a,e){let r=await o(s,{object_type:"bare",method:"create_provider_from_name",args:[a,e]}),n=h();return n._id=r,n}i(v,"createProviderFromName");async function K(){return o(s,{object_type:"bare",method:"get_all_providers",args:[]})}i(K,"getAllProviders");async function U(a){return o(s,{object_type:"bare",method:"get_provider_capabilities",args:[a]})}i(U,"getProviderCapabilities");function h(){return{_id:"",createKey:i(async function(a){let e={object_type:"provider",object_id:this._id,method:"create_key",args:[a]},t=await o(s,e);return p(t)},"createKey"),createKeyPair:i(async function(a){let e={object_type:"provider",object_id:this._id,method:"create_key_pair",args:[a]},t=await o(s,e);return m(t)},"createKeyPair"),loadKey:i(async function(a){let e={object_type:"provider",object_id:this._id,method:"load_key",args:[a]},t=await o(s,e);return p(t)},"loadKey"),loadKeyPair:i(async function(a){let e={object_type:"provider",object_id:this._id,method:"load_key_pair",args:[a]},t=await o(s,e);return m(t)},"loadKeyPair"),importKey:i(async function(a,e){let t=y(e),r={object_type:"provider",object_id:this._id,method:"import_key",args:[a,t]},n=await o(s,r);return p(n)},"importKey"),importKeyPair:i(async function(a,e,t){let r=y(e),n=y(t),c={object_type:"provider",object_id:this._id,method:"import_key_pair",args:[a,r,n]},d=await o(s,c);return m(d)},"importKeyPair"),importPublicKey:i(async function(a,e){let t=y(e),r={object_type:"provider",object_id:this._id,method:"import_public_key",args:[a,t]},n=await o(s,r);return m(n)},"importPublicKey"),startEphemeralDhExchange:i(async function(){let a={object_type:"provider",object_id:this._id,method:"start_ephemeral_dh_exchange",args:[]},e=await o(s,a);return u(e)},"startEphemeralDhExchange"),getAllKeys:i(function(){let a={object_type:"provider",object_id:this._id,method:"get_all_keys",args:[]};return o(s,a)},"getAllKeys"),providerName:i(async function(){let a={object_type:"provider",object_id:this._id,method:"provider_name",args:[]};return o(s,a)},"providerName"),getCapabilities:i(async function(){let a={object_type:"provider",object_id:this._id,method:"get_capabilities",args:[]};return o(s,a)},"getCapabilities"),deriveKeyFromPassword:i(async function(a,e,t,r){let n=y(e),c={object_type:"provider",object_id:this._id,method:"derive_key_from_password",args:[a,n,t,r]},d=await o(s,c);return p(d)},"deriveKeyFromPassword"),deriveKeyFromBase:i(async function(a,e,t,r){let n=y(a),c={object_type:"provider",object_id:this._id,method:"derive_key_from_base",args:[n,e,t,r]},d=await o(s,c);return p(d)},"deriveKeyFromBase"),getRandom:i(async function(a){let e={object_type:"provider",object_id:this._id,method:"get_random",args:[a]},t=await o(s,e);return l(t)},"getRandom"),hash:i(async function(a,e){let t=y(a),r={object_type:"provider",object_id:this._id,method:"hash",args:[t,e]},n=await o(s,r);return l(n)},"hash")}}i(h,"newProvider");function p(a){return{_id:a,id:i(function(){return Promise.resolve(this._id)},"id"),encryptData:i(async function(e){let t=y(e),r={object_type:"key",object_id:this._id,method:"encrypt_data",args:[t]},[n,c]=await o(s,r),d=l(n),_=l(c);return[d,_]},"encryptData"),decryptData:i(async function(e,t){let r=y(e),n=y(t),c={object_type:"key",object_id:this._id,method:"decrypt_data",args:[r,n]},d=await o(s,c);return l(d)},"decryptData"),hmac:i(async function(e){let t=y(e),r={object_type:"key",object_id:this._id,method:"hmac",args:[t]},n=await o(s,r);return l(n)},"hmac"),verifyHmac:i(async function(e,t){let r=y(e),n=y(t),c={object_type:"key",object_id:this._id,method:"verify_hmac",args:[r,n]};return o(s,c)},"verifyHmac"),delete:i(async function(){let e={object_type:"key",object_id:this._id,method:"delete",args:[]};o(s,e)},"delete"),extractKey:i(async function(){let e={object_type:"key",object_id:this._id,method:"extract_key",args:[]},t=await o(s,e);return l(t)},"extractKey"),spec:i(async function(){let e={object_type:"key",object_id:this._id,method:"spec",args:[]};return o(s,e)},"spec")}}i(p,"newKeyHandle");function m(a){return{_id:a,id(){return Promise.resolve(this._id)},encryptData:i(async function(e){let t=y(e),r={object_type:"key_pair",object_id:this._id,method:"encrypt_data",args:[t]},n=await o(s,r);return l(n)},"encryptData"),decryptData:i(async function(e){let t=y(e),r={object_type:"key_pair",object_id:this._id,method:"decrypt_data",args:[t]},n=await o(s,r);return l(n)},"decryptData"),signData:i(async function(e){let t=await y(e),r={object_type:"key_pair",object_id:this._id,method:"sign_data",args:[t]},n=await o(s,r);return l(n)},"signData"),verifySignature:i(async function(e,t){let r=await y(e),n=await y(t),c={object_type:"key_pair",object_id:this._id,method:"verify_signature",args:[r,n]};return o(s,c)},"verifySignature"),delete:i(async function(){let e={object_type:"key_pair",object_id:this._id,method:"delete",args:[]};o(s,e)},"delete"),getPublicKey:i(async function(){let e={object_type:"key_pair",object_id:this._id,method:"extract_public_key",args:[]},t=await o(s,e);return l(t)},"getPublicKey"),extractKey:i(async function(){let e={object_type:"key_pair",object_id:this._id,method:"extract_key",args:[]},t=await o(s,e);return l(t)},"extractKey"),spec:i(async function(){let e={object_type:"key_pair",object_id:this._id,method:"spec",args:[]};return o(s,e)},"spec")}}i(m,"newKeyPairHandle");function u(a){return{_id:a,id:i(async function(){return this._id},"id"),getPublicKey:i(async function(){let e={object_type:"dh_exchange",object_id:this._id,method:"get_public_key",args:[]},t=await o(s,e);return l(t)},"getPublicKey"),deriveClientSessionKeys:i(async function(e){let t=y(e),r={object_type:"dh_exchange",object_id:this._id,method:"derive_client_session_keys",args:[t]},[n,c]=await o(s,r),d=l(n),_=l(c);return[d,_]},"deriveClientSessionKeys"),deriveServerSessionKeys:i(async function(e){let t=y(e),r={object_type:"dh_exchange",object_id:this._id,method:"derive_server_session_keys",args:[t]},[n,c]=await o(s,r),d=l(n),_=l(c);return[d,_]},"deriveServerSessionKeys"),deriveClientKeyHandles:i(async function(e){let t=y(e),r={object_type:"dh_exchange",object_id:this._id,method:"derive_client_key_handles",args:[t]},[n,c]=await o(s,r),d=p(n),_=p(c);return[d,_]},"deriveClientKeyHandles"),deriveServerKeyHandles:i(async function(e){let t=y(e),r={object_type:"dh_exchange",object_id:this._id,method:"derive_server_key_handles",args:[t]},[n,c]=await o(s,r),d=p(n),_=p(c);return[d,_]},"deriveServerKeyHandles")}}i(u,"newDhKeyExchange");var f={createProvider:b,createProviderFromName:v,getAllProviders:K,getProviderCapabilities:U,provider:h,keyHandle:p,keyPairHandle:m,dhKeyExchange:u};window.cryptoInit=f;})();
