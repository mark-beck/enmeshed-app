"use strict";(()=>{var v=Object.defineProperty;var a=(i,e)=>v(i,"name",{value:e,configurable:!0});var A=class A extends Error{constructor(e){super(e)}};a(A,"TsDartBridgeError");var m=A;function l(i){let e=atob(i),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}a(l,"base64toUint8Array");async function y(i){let e=i;i.constructor!=Uint8Array&&(e=new Uint8Array(i));let t=await new Promise(r=>{let n=new FileReader;n.onload=()=>r(n.result),n.readAsDataURL(new Blob([e.buffer]))});return t.slice(t.indexOf(",")+1)}a(y,"bufferToBase64");var s="handleCryptoEvent";async function o(i,e){let t=await window.flutter_inappwebview.callHandler(i,JSON.stringify(e)),r=JSON.parse(t);if(r.status=="ok")return r.data;throw new m(r.message)}a(o,"callHandler");async function K(i,e){let r=await o(s,{object_type:"bare",method:"create_provider",args:[i,e]}),n=u();return n._id=r,n}a(K,"createProvider");async function U(i,e){let r=await o(s,{object_type:"bare",method:"create_provider_from_name",args:[i,e]}),n=u();return n._id=r,n}a(U,"createProviderFromName");async function f(){return o(s,{object_type:"bare",method:"get_all_providers",args:[]})}a(f,"getAllProviders");async function j(i){return o(s,{object_type:"bare",method:"get_provider_capabilities",args:[i]})}a(j,"getProviderCapabilities");function u(){return{_id:"",createKey:a(async function(i){let e={object_type:"provider",object_id:this._id,method:"create_key",args:[i]},t=await o(s,e);return p(t)},"createKey"),createKeyPair:a(async function(i){let e={object_type:"provider",object_id:this._id,method:"create_key_pair",args:[i]},t=await o(s,e);return h(t)},"createKeyPair"),loadKey:a(async function(i){let e={object_type:"provider",object_id:this._id,method:"load_key",args:[i]},t=await o(s,e);return p(t)},"loadKey"),loadKeyPair:a(async function(i){let e={object_type:"provider",object_id:this._id,method:"load_key_pair",args:[i]},t=await o(s,e);return h(t)},"loadKeyPair"),importKey:a(async function(i,e){let t=y(e),r={object_type:"provider",object_id:this._id,method:"import_key",args:[i,t]},n=await o(s,r);return p(n)},"importKey"),importKeyPair:a(async function(i,e,t){let r=y(e),n=y(t),c={object_type:"provider",object_id:this._id,method:"import_key_pair",args:[i,r,n]},d=await o(s,c);return h(d)},"importKeyPair"),importPublicKey:a(async function(i,e){let t=y(e),r={object_type:"provider",object_id:this._id,method:"import_public_key",args:[i,t]},n=await o(s,r);return h(n)},"importPublicKey"),startEphemeralDhExchange:a(async function(){let i={object_type:"provider",object_id:this._id,method:"start_ephemeral_dh_exchange",args:[]},e=await o(s,i);return g(e)},"startEphemeralDhExchange"),dhExchangeFromKeys:a(async function(i,e,t){let r=y(i),n=y(e),c={object_type:"provider",object_id:this._id,method:"dh_exchange_from_key",args:[r,n,t]},d=await o(s,c);return g(d)},"dhExchangeFromKeys"),getAllKeys:a(function(){let i={object_type:"provider",object_id:this._id,method:"get_all_keys",args:[]};return o(s,i)},"getAllKeys"),providerName:a(async function(){let i={object_type:"provider",object_id:this._id,method:"provider_name",args:[]};return o(s,i)},"providerName"),getCapabilities:a(async function(){let i={object_type:"provider",object_id:this._id,method:"get_capabilities",args:[]};return o(s,i)},"getCapabilities"),deriveKeyFromPassword:a(async function(i,e,t,r){let n=y(e),c={object_type:"provider",object_id:this._id,method:"derive_key_from_password",args:[i,n,t,r]},d=await o(s,c);return p(d)},"deriveKeyFromPassword"),deriveKeyFromBase:a(async function(i,e,t,r){let n=y(i),c={object_type:"provider",object_id:this._id,method:"derive_key_from_base",args:[n,e,t,r]},d=await o(s,c);return p(d)},"deriveKeyFromBase"),getRandom:a(async function(i){let e={object_type:"provider",object_id:this._id,method:"get_random",args:[i]},t=await o(s,e);return l(t)},"getRandom"),hash:a(async function(i,e){let t=y(i),r={object_type:"provider",object_id:this._id,method:"hash",args:[t,e]},n=await o(s,r);return l(n)},"hash")}}a(u,"newProvider");function p(i){return{_id:i,id:a(function(){return Promise.resolve(this._id)},"id"),encryptData:a(async function(e,t){let r=y(e),n=y(t),c={object_type:"key",object_id:this._id,method:"encrypt_data",args:[r,n]},[d,_]=await o(s,c),P=l(d),b=l(_);return[P,b]},"encryptData"),encrypt:a(async function(e){let t=y(e),r={object_type:"key",object_id:this._id,method:"encrypt",args:[t]},[n,c]=await o(s,r),d=l(n),_=l(c);return[d,_]},"encrypt"),encryptWithIv:a(async function(e,t){let r=y(e),n=y(t),c={object_type:"key",object_id:this._id,method:"encrypt_with_iv",args:[r,n]},d=await o(s,c);return l(d)},"encryptWithIv"),decryptData:a(async function(e,t){let r=y(e),n=y(t),c={object_type:"key",object_id:this._id,method:"decrypt_data",args:[r,n]},d=await o(s,c);return l(d)},"decryptData"),hmac:a(async function(e){let t=y(e),r={object_type:"key",object_id:this._id,method:"hmac",args:[t]},n=await o(s,r);return l(n)},"hmac"),verifyHmac:a(async function(e,t){let r=y(e),n=y(t),c={object_type:"key",object_id:this._id,method:"verify_hmac",args:[r,n]};return o(s,c)},"verifyHmac"),deriveKey:a(async function(e){let t=y(e),r={object_type:"key",object_id:this._id,method:"derive_key",args:[t]};return o(s,r)},"deriveKey"),delete:a(async function(){let e={object_type:"key",object_id:this._id,method:"delete",args:[]};o(s,e)},"delete"),extractKey:a(async function(){let e={object_type:"key",object_id:this._id,method:"extract_key",args:[]},t=await o(s,e);return l(t)},"extractKey"),spec:a(async function(){let e={object_type:"key",object_id:this._id,method:"spec",args:[]};return o(s,e)},"spec")}}a(p,"newKeyHandle");function h(i){return{_id:i,id(){return Promise.resolve(this._id)},encryptData:a(async function(e,t){let r=y(e),n=y(t),c={object_type:"key_pair",object_id:this._id,method:"encrypt_data",args:[r,n]},d=await o(s,c);return l(d)},"encryptData"),decryptData:a(async function(e){let t=y(e),r={object_type:"key_pair",object_id:this._id,method:"decrypt_data",args:[t]},n=await o(s,r);return l(n)},"decryptData"),signData:a(async function(e){let t=await y(e),r={object_type:"key_pair",object_id:this._id,method:"sign_data",args:[t]},n=await o(s,r);return l(n)},"signData"),verifySignature:a(async function(e,t){let r=await y(e),n=await y(t),c={object_type:"key_pair",object_id:this._id,method:"verify_signature",args:[r,n]};return o(s,c)},"verifySignature"),delete:a(async function(){let e={object_type:"key_pair",object_id:this._id,method:"delete",args:[]};o(s,e)},"delete"),getPublicKey:a(async function(){let e={object_type:"key_pair",object_id:this._id,method:"extract_public_key",args:[]},t=await o(s,e);return l(t)},"getPublicKey"),extractKey:a(async function(){let e={object_type:"key_pair",object_id:this._id,method:"extract_key",args:[]},t=await o(s,e);return l(t)},"extractKey"),startDhExchange:a(async function(){let e={object_type:"key_pair",object_id:this._id,method:"start_dh_exchange",args:[]},t=await o(s,e);return g(t)},"startDhExchange"),spec:a(async function(){let e={object_type:"key_pair",object_id:this._id,method:"spec",args:[]};return o(s,e)},"spec")}}a(h,"newKeyPairHandle");function g(i){return{_id:i,id:a(async function(){return this._id},"id"),getPublicKey:a(async function(){let e={object_type:"dh_exchange",object_id:this._id,method:"get_public_key",args:[]},t=await o(s,e);return l(t)},"getPublicKey"),deriveClientSessionKeys:a(async function(e){let t=y(e),r={object_type:"dh_exchange",object_id:this._id,method:"derive_client_session_keys",args:[t]},[n,c]=await o(s,r),d=l(n),_=l(c);return[d,_]},"deriveClientSessionKeys"),deriveServerSessionKeys:a(async function(e){let t=y(e),r={object_type:"dh_exchange",object_id:this._id,method:"derive_server_session_keys",args:[t]},[n,c]=await o(s,r),d=l(n),_=l(c);return[d,_]},"deriveServerSessionKeys"),deriveClientKeyHandles:a(async function(e){let t=y(e),r={object_type:"dh_exchange",object_id:this._id,method:"derive_client_key_handles",args:[t]},[n,c]=await o(s,r),d=p(n),_=p(c);return[d,_]},"deriveClientKeyHandles"),deriveServerKeyHandles:a(async function(e){let t=y(e),r={object_type:"dh_exchange",object_id:this._id,method:"derive_server_key_handles",args:[t]},[n,c]=await o(s,r),d=p(n),_=p(c);return[d,_]},"deriveServerKeyHandles")}}a(g,"newDhKeyExchange");var w={createProvider:K,createProviderFromName:U,getAllProviders:f,getProviderCapabilities:j,provider:u,keyHandle:p,keyPairHandle:h,dhKeyExchange:g};window.cryptoInit=w;})();
